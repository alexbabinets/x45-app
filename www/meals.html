<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>X45 — Meals (AI)</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0a0b0d; --panel:#0f1116; --panel2:#0e0f13; --divider:#1a1c22;
  --ink:#e7ecf3; --muted:#9aa3ad; --ring:rgba(128,173,214,.22);
  --btn:#263244; --btnH:#32415a;
  --accent:#3ea6ff; --accentSoft:rgba(62,166,255,.15);
  --protein:#ec4899; --carbs:#22c55e; --fat:#eab308;
}
*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:'Inter',system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
  background:radial-gradient(circle at top,#111827 0,#020617 52%,#000 100%);
  color:var(--ink);
  min-height:100vh;
  display:flex;
  justify-content:center;
  padding:16px;
}
.app-shell{
  width:100%;
  max-width:980px;
  background:linear-gradient(145deg,rgba(15,17,22,.96),rgba(6,8,12,.98));
  border-radius:24px;
  border:1px solid rgba(148,163,184,.35);
  box-shadow:0 24px 80px rgba(15,23,42,.75);
  padding:16px 14px 18px;
}
header{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  align-items:flex-start;
  margin-bottom:14px;
}
.header-main{
  flex:1 1 220px;
}
.badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  font-size:11px;
  padding:4px 9px;
  border-radius:999px;
  background:rgba(15,118,220,.12);
  color:#bfdbfe;
  border:1px solid rgba(59,130,246,.35);
  margin-bottom:6px;
}
.badge-dot{
  width:7px;height:7px;border-radius:999px;
  background:radial-gradient(circle at 30% 30%,#4ade80,#16a34a);
  box-shadow:0 0 10px rgba(74,222,128,.8);
}
h1{
  font-size:17px;
  letter-spacing:.03em;
  text-transform:uppercase;
  margin-bottom:2px;
}
.sub{
  font-size:12px;
  color:var(--muted);
}
.header-right{
  display:flex;
  flex-direction:column;
  gap:6px;
  align-items:flex-end;
  min-width:190px;
}
.chip-row{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
  justify-content:flex-end;
}
.chip{
  font-size:10px;
  padding:4px 8px;
  border-radius:999px;
  border:1px solid rgba(148,163,184,.35);
  color:var(--muted);
  background:rgba(15,23,42,.9);
}
.header-kpi{
  display:flex;
  gap:10px;
  align-items:center;
  font-size:11px;
  color:var(--muted);
}
.header-kpi strong{color:var(--ink);}
.header-kpi span.label{
  text-transform:uppercase;
  letter-spacing:.08em;
  font-size:9px;
  color:#64748b;
}

/* layout */
.main-grid{
  display:grid;
  grid-template-columns:minmax(0,1.1fr) minmax(0,1.1fr);
  gap:12px;
}
@media (max-width:880px){
  .main-grid{
    grid-template-columns:1fr;
  }
  header{
    flex-direction:column;
  }
  .header-right{
    align-items:flex-start;
  }
  .header-kpi{
    justify-content:flex-start;
    flex-wrap:wrap;
  }
}

/* totals panel */
.panel{
  background:radial-gradient(circle at top left,#020617 0, #020617 26%, #020617 40%, #000 100%);
  border-radius:18px;
  border:1px solid rgba(148,163,184,.35);
  padding:12px 10px 12px;
  position:relative;
  overflow:hidden;
}
.panel::before{
  content:"";
  position:absolute;
  inset:-40%;
  background:radial-gradient(circle at top left,rgba(59,130,246,.18),transparent 55%);
  opacity:.35;
  pointer-events:none;
}
.panel-inner{position:relative;z-index:1;}

.panel-header{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:8px;
  margin-bottom:10px;
}
.panel-title-wrap{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.panel-eyebrow{
  font-size:11px;
  text-transform:uppercase;
  letter-spacing:.12em;
  color:#64748b;
}
.panel-title{
  font-size:14px;
  font-weight:600;
}
.panel-meta{
  font-size:11px;
  color:var(--muted);
}
.panel-actions{
  display:flex;
  flex-wrap:wrap;
  gap:6px;
}
.btn-ghost{
  border-radius:999px;
  border:1px solid rgba(148,163,184,.45);
  padding:3px 9px;
  font-size:11px;
  background:rgba(15,23,42,.9);
  color:var(--muted);
  display:inline-flex;
  align-items:center;
  gap:6px;
  cursor:pointer;
}
.btn-ghost span.dot{
  width:7px;height:7px;border-radius:999px;
  background:radial-gradient(circle at 30% 30%,#22c55e,#16a34a);
}
.btn-ghost:hover{
  border-color:rgba(148,163,184,.9);
  color:var(--ink);
}

/* donut + totals */
.totals-layout{
  display:grid;
  grid-template-columns:auto 1fr;
  gap:8px;
  align-items:center;
}
@media (max-width:480px){
  .totals-layout{
    grid-template-columns:1fr;
    justify-items:flex-start;
  }
}
.donut-wrap{
  display:flex;
  align-items:center;
  justify-content:center;
}
.donut{
  --p:33;
  --c:33;
  --f:34;
  width:116px;
  height:116px;
  border-radius:50%;
  background:
    conic-gradient(
      var(--protein) 0 calc(var(--p)*1%),
      var(--carbs) calc(var(--p)*1%) calc((var(--p) + var(--c))*1%),
      var(--fat) calc((var(--p) + var(--c))*1%) 100%
    );
  position:relative;
  box-shadow:0 0 0 1px rgba(15,23,42,1),0 18px 40px rgba(15,23,42,.9);
}
.donut::after{
  content:"";
  position:absolute;
  inset:18px;
  border-radius:50%;
  background:radial-gradient(circle at top,#020617 0,#020617 45%,#020617 100%);
  box-shadow:inset 0 0 0 1px rgba(15,23,42,.9);
}
.donut-center{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:11px;
  font-weight:600;
  z-index:1;
}
.donut-center span{
  text-align:center;
  line-height:1.3;
}
.donut-center span small{
  display:block;
  font-size:9px;
  letter-spacing:.12em;
  text-transform:uppercase;
  color:#64748b;
}

.totals-text{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.totals-row{
  display:flex;
  flex-wrap:wrap;
  gap:4px 14px;
  font-size:12px;
}
.totals-row span.label{
  text-transform:uppercase;
  letter-spacing:.18em;
  font-size:9px;
  color:#64748b;
}
.totals-row strong{
  font-weight:600;
}
.macros-line{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  font-size:11px;
}
.badge-macro{
  display:inline-flex;
  align-items:center;
  gap:6px;
  padding:4px 9px;
  border-radius:999px;
  background:rgba(15,23,42,.9);
  border:1px solid rgba(148,163,184,.4);
}
.m-dot{
  width:8px;
  height:8px;
  border-radius:999px;
}
.m-dot.protein{background:var(--protein);box-shadow:0 0 8px rgba(236,72,153,.8);}
.m-dot.carbs{background:var(--carbs);box-shadow:0 0 8px rgba(34,197,94,.8);}
.m-dot.fat{background:var(--fat);box-shadow:0 0 8px rgba(234,179,8,.8);}

/* meals list */
.meals-panel{
  background:radial-gradient(circle at top,#020617 0,#020617 38%,#000 100%);
  border-radius:18px;
  border:1px solid rgba(148,163,184,.35);
  padding:10px 9px 10px;
}
.meals-header{
  display:flex;
  justify-content:space-between;
  gap:8px;
  align-items:flex-end;
  margin-bottom:8px;
}
.meals-title-wrap{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.meals-title{
  font-size:14px;
  font-weight:600;
}
.meals-sub{
  font-size:11px;
  color:var(--muted);
}
.meals-header-meta{
  text-align:right;
  font-size:11px;
  color:var(--muted);
}
.meals-header-meta span.label{
  display:block;
  text-transform:uppercase;
  letter-spacing:.16em;
  font-size:9px;
  color:#64748b;
}

.meals-list{
  display:flex;
  flex-direction:column;
  gap:8px;
}
.meal-card{
  border-radius:14px;
  border:1px solid rgba(51,65,85,.8);
  background:
    linear-gradient(135deg,rgba(15,23,42,.96),rgba(15,23,42,.98)),
    radial-gradient(circle at top left,rgba(37,99,235,.22),transparent 55%);
  padding:8px 9px 9px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.meal-header{
  display:flex;
  justify-content:space-between;
  gap:6px;
}
.meal-title-block{
  display:flex;
  flex-direction:column;
  gap:2px;
}
.meal-name{
  font-size:13px;
  font-weight:600;
}
.meal-meta{
  font-size:11px;
  color:var(--muted);
}
.meal-actions{
  display:flex;
  flex-wrap:wrap;
  gap:4px;
  justify-content:flex-end;
}
.meal-btn{
  border-radius:999px;
  border:1px solid rgba(148,163,184,.35);
  font-size:10px;
  padding:3px 7px;
  background:rgba(15,23,42,.9);
  color:var(--muted);
  cursor:pointer;
}
.meal-btn.primary{
  border-color:rgba(96,165,250,.8);
  color:#e0f2fe;
}
.meal-btn:hover{
  border-color:rgba(148,163,184,.9);
  color:var(--ink);
}

/* meal stats */
.meal-stats{
  display:flex;
  flex-wrap:wrap;
  gap:8px 14px;
  font-size:11px;
  color:var(--muted);
}
.meal-stats strong{color:var(--ink);}
.meal-stats span.label{
  text-transform:uppercase;
  letter-spacing:.14em;
  font-size:9px;
  color:#64748b;
}

/* sliders */
.sliders-block{
  border-radius:12px;
  border:1px solid rgba(30,64,175,.85);
  background:linear-gradient(135deg,rgba(15,23,42,.98),rgba(15,23,42,.96));
  padding:7px 8px;
  display:flex;
  flex-direction:column;
  gap:6px;
}
.slider-row{
  display:grid;
  grid-template-columns:90px 1fr 52px;
  align-items:center;
  gap:6px;
  font-size:11px;
}
@media (max-width:520px){
  .slider-row{
    grid-template-columns:minmax(0,1.1fr) minmax(0,2fr);
    grid-template-rows:auto auto;
  }
  .slider-row .slider-label{
    grid-column:1/3;
  }
  .slider-row .slider-output{
    justify-self:flex-end;
  }
}
.slider-label{
  display:flex;
  flex-direction:column;
  gap:1px;
}
.slider-label span.top{
  text-transform:uppercase;
  letter-spacing:.16em;
  font-size:9px;
  color:#64748b;
}
.slider-label span.bottom{
  font-size:11px;
}
.slider-track-wrap{
  position:relative;
  height:22px;
  display:flex;
  align-items:center;
}
.slider-track-wrap input[type=range]{
  -webkit-appearance:none;
  appearance:none;
  width:100%;
  background:transparent;
}
input[type=range]:focus{outline:none;}
input[type=range]::-webkit-slider-runnable-track{
  height:4px;
  border-radius:999px;
  background:linear-gradient(90deg,rgba(56,189,248,.85),rgba(59,130,246,.9));
}
input[type=range]::-moz-range-track{
  height:4px;
  border-radius:999px;
  background:linear-gradient(90deg,rgba(56,189,248,.85),rgba(59,130,246,.9));
}
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  appearance:none;
  width:16px;
  height:16px;
  border-radius:999px;
  background:#e5f2ff;
  border:2px solid #2563eb;
  box-shadow:0 0 0 4px rgba(59,130,246,.25);
  margin-top:-6px;
}
input[type=range]::-moz-range-thumb{
  width:15px;height:15px;border-radius:999px;
  background:#e5f2ff;
  border:2px solid #2563eb;
  box-shadow:0 0 0 4px rgba(59,130,246,.25);
}
input[type=range]:disabled::-webkit-slider-thumb,
input[type=range]:disabled::-moz-range-thumb{
  background:#94a3b8;
  border-color:#64748b;
  box-shadow:none;
}
.slider-output{
  text-align:right;
  font-size:11px;
  color:var(--muted);
}
.slider-output strong{color:var(--ink);}

/* fine print */
.fine-print{
  margin-top:10px;
  font-size:10px;
  color:#64748b;
  line-height:1.5;
}
.fine-print strong{color:#cbd5f5;}
</style>
</head>
<body>
<div class="app-shell">
  <header>
    <div class="header-main">
      <div class="badge">
        <div class="badge-dot"></div>
        <span>AI‑Generated daily plan • X45</span>
      </div>
      <h1>Meals &amp; Portions</h1>
      <div class="sub">Adjust your meals for today by <strong>tuning macros</strong> instead of rebuilding the whole menu.</div>
    </div>
    <div class="header-right">
      <div class="chip-row">
        <div class="chip">30‑day trial • Cancel anytime</div>
        <div class="chip">Device‑aware timing</div>
        <div class="chip">Coach reads this data</div>
      </div>
      <div class="header-kpi">
        <span class="label">Today</span>
        <span><strong id="summary-calories">1,980</strong> kcal</span>
        <span>• P <strong id="summary-protein">120 g</strong></span>
        <span>• C <strong id="summary-carbs">210 g</strong></span>
        <span>• F <strong id="summary-fat">55 g</strong></span>
      </div>
    </div>
  </header>

  <div class="main-grid">
    <!-- TOTALS -->
    <section class="panel">
      <div class="panel-inner">
        <div class="panel-header">
          <div class="panel-title-wrap">
            <div class="panel-eyebrow">Daily overview</div>
            <div class="panel-title">Total macros &amp; calories</div>
            <div class="panel-meta">Everything you change in meals below instantly reshapes this ring.</div>
          </div>
          <div class="panel-actions">
            <button class="btn-ghost" type="button">
              <span class="dot"></span>
              Live sync on
            </button>
          </div>
        </div>
        <div class="totals-layout">
          <div class="donut-wrap">
            <div class="donut" id="macro-donut">
              <div class="donut-center">
                <span>
                  <span id="donut-kcal">1,980</span>
                  <small>total kcal</small>
                </span>
              </div>
            </div>
          </div>
          <div class="totals-text">
            <div class="totals-row">
              <span class="label">Today's target</span>
              <span><strong><span id="total-calories-text">1,980</span> kcal</strong> from all meals</span>
            </div>
            <div class="macros-line">
              <span class="badge-macro">
                <span class="m-dot protein"></span>
                <span>Protein: <strong id="total-protein">120 g</strong></span>
              </span>
              <span class="badge-macro">
                <span class="m-dot carbs"></span>
                <span>Carbs: <strong id="total-carbs">210 g</strong></span>
              </span>
              <span class="badge-macro">
                <span class="m-dot fat"></span>
                <span>Fats: <strong id="total-fat">55 g</strong></span>
              </span>
            </div>
            <div class="totals-row" style="margin-top:4px;">
              <span class="label">Macro split</span>
              <span>Protein <strong id="split-protein">0%</strong> • Carbs <strong id="split-carbs">0%</strong> • Fats <strong id="split-fat">0%</strong></span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- MEALS -->
    <section class="meals-panel">
      <div class="meals-header">
        <div class="meals-title-wrap">
          <div class="meals-title">Meals for today</div>
          <div class="meals-sub">Move only sliders. Names, timings and buttons stay as they are.</div>
        </div>
        <div class="meals-header-meta">
          <span class="label">How it works</span>
          <span>Portions scale the whole plate • Macro sliders <strong>add P/C/F</strong> on top</span>
        </div>
      </div>

      <div class="meals-list" id="meals-list">
        <!-- Breakfast -->
        <article class="meal-card" data-meal-id="breakfast"
          data-base-protein="32" data-base-carbs="55" data-base-fat="14">
          <div class="meal-header">
            <div class="meal-title-block">
              <div class="meal-name">Breakfast — Oat bowl + eggs</div>
              <div class="meal-meta">Steel‑cut oats, berries, 2 eggs, a bit of nuts.</div>
            </div>
            <div class="meal-actions">
              <button class="meal-btn" type="button">★ Favorite</button>
              <button class="meal-btn" type="button">Save</button>
              <button class="meal-btn" type="button">Use</button>
              <button class="meal-btn" type="button">Swap</button>
              <button class="meal-btn primary" type="button">AI Swap</button>
            </div>
          </div>

          <div class="meal-stats">
            <span><span class="label">Calories</span> <strong><span class="meal-kcal">0</span> kcal</strong></span>
            <span><span class="label">Macros</span>
              P <strong><span class="meal-protein">0</span> g</strong> •
              C <strong><span class="meal-carbs">0</span> g</strong> •
              F <strong><span class="meal-fat">0</span> g</strong>
            </span>
          </div>

          <div class="sliders-block">
            <div class="slider-row">
              <div class="slider-label slider-label-portion">
                <span class="top">Portion size</span>
                <span class="bottom">Scale entire plate</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="50" max="150" step="10"
                  value="100" class="slider-portion">
              </div>
              <div class="slider-output">
                <span><strong><span class="portion-output">100</span>%</strong></span>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Protein</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="30" step="2"
                  value="0" class="slider-protein">
              </div>
              <div class="slider-output">
                +<strong><span class="protein-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Carbs</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="40" step="5"
                  value="0" class="slider-carbs">
              </div>
              <div class="slider-output">
                +<strong><span class="carbs-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Fats</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="20" step="2"
                  value="0" class="slider-fat">
              </div>
              <div class="slider-output">
                +<strong><span class="fat-output">0</span> g</strong>
              </div>
            </div>
          </div>
        </article>

        <!-- Lunch -->
        <article class="meal-card" data-meal-id="lunch"
          data-base-protein="40" data-base-carbs="60" data-base-fat="18">
          <div class="meal-header">
            <div class="meal-title-block">
              <div class="meal-name">Lunch — Chicken, rice &amp; salad</div>
              <div class="meal-meta">Grilled chicken, basmati rice, leafy greens, olive oil.</div>
            </div>
            <div class="meal-actions">
              <button class="meal-btn" type="button">★ Favorite</button>
              <button class="meal-btn" type="button">Save</button>
              <button class="meal-btn" type="button">Use</button>
              <button class="meal-btn" type="button">Swap</button>
              <button class="meal-btn primary" type="button">AI Swap</button>
            </div>
          </div>

          <div class="meal-stats">
            <span><span class="label">Calories</span> <strong><span class="meal-kcal">0</span> kcal</strong></span>
            <span><span class="label">Macros</span>
              P <strong><span class="meal-protein">0</span> g</strong> •
              C <strong><span class="meal-carbs">0</span> g</strong> •
              F <strong><span class="meal-fat">0</span> g</strong>
            </span>
          </div>

          <div class="sliders-block">
            <div class="slider-row">
              <div class="slider-label slider-label-portion">
                <span class="top">Portion size</span>
                <span class="bottom">Scale entire plate</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="50" max="150" step="10"
                  value="100" class="slider-portion">
              </div>
              <div class="slider-output">
                <span><strong><span class="portion-output">100</span>%</strong></span>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Protein</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="40" step="2"
                  value="0" class="slider-protein">
              </div>
              <div class="slider-output">
                +<strong><span class="protein-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Carbs</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="50" step="5"
                  value="0" class="slider-carbs">
              </div>
              <div class="slider-output">
                +<strong><span class="carbs-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Fats</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="25" step="1"
                  value="0" class="slider-fat">
              </div>
              <div class="slider-output">
                +<strong><span class="fat-output">0</span> g</strong>
              </div>
            </div>
          </div>
        </article>

        <!-- Dinner -->
        <article class="meal-card" data-meal-id="dinner"
          data-base-protein="36" data-base-carbs="50" data-base-fat="17">
          <div class="meal-header">
            <div class="meal-title-block">
              <div class="meal-name">Dinner — Fish &amp; vegetables</div>
              <div class="meal-meta">Baked fish, potatoes or quinoa, mixed veggies, olive oil.</div>
            </div>
            <div class="meal-actions">
              <button class="meal-btn" type="button">★ Favorite</button>
              <button class="meal-btn" type="button">Save</button>
              <button class="meal-btn" type="button">Use</button>
              <button class="meal-btn" type="button">Swap</button>
              <button class="meal-btn primary" type="button">AI Swap</button>
            </div>
          </div>

          <div class="meal-stats">
            <span><span class="label">Calories</span> <strong><span class="meal-kcal">0</span> kcal</strong></span>
            <span><span class="label">Macros</span>
              P <strong><span class="meal-protein">0</span> g</strong> •
              C <strong><span class="meal-carbs">0</span> g</strong> •
              F <strong><span class="meal-fat">0</span> g</strong>
            </span>
          </div>

          <div class="sliders-block">
            <div class="slider-row">
              <div class="slider-label slider-label-portion">
                <span class="top">Portion size</span>
                <span class="bottom">Scale entire plate</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="50" max="150" step="10"
                  value="100" class="slider-portion">
              </div>
              <div class="slider-output">
                <span><strong><span class="portion-output">100</span>%</strong></span>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Protein</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="30" step="2"
                  value="0" class="slider-protein">
              </div>
              <div class="slider-output">
                +<strong><span class="protein-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Carbs</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="45" step="5"
                  value="0" class="slider-carbs">
              </div>
              <div class="slider-output">
                +<strong><span class="carbs-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Fats</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="20" step="1"
                  value="0" class="slider-fat">
              </div>
              <div class="slider-output">
                +<strong><span class="fat-output">0</span> g</strong>
              </div>
            </div>
          </div>
        </article>

        <!-- Snack -->
        <article class="meal-card" data-meal-id="snack"
          data-base-protein="12" data-base-carbs="45" data-base-fat="6">
          <div class="meal-header">
            <div class="meal-title-block">
              <div class="meal-name">Snack — Fruit + yogurt</div>
              <div class="meal-meta">Plain yogurt or kefir with fruit or a simple bar.</div>
            </div>
            <div class="meal-actions">
              <button class="meal-btn" type="button">★ Favorite</button>
              <button class="meal-btn" type="button">Save</button>
              <button class="meal-btn" type="button">Use</button>
              <button class="meal-btn" type="button">Swap</button>
              <button class="meal-btn primary" type="button">AI Swap</button>
            </div>
          </div>

          <div class="meal-stats">
            <span><span class="label">Calories</span> <strong><span class="meal-kcal">0</span> kcal</strong></span>
            <span><span class="label">Macros</span>
              P <strong><span class="meal-protein">0</span> g</strong> •
              C <strong><span class="meal-carbs">0</span> g</strong> •
              F <strong><span class="meal-fat">0</span> g</strong>
            </span>
          </div>

          <div class="sliders-block">
            <div class="slider-row">
              <div class="slider-label slider-label-portion">
                <span class="top">Portion size</span>
                <span class="bottom">Scale entire plate</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="50" max="150" step="10"
                  value="100" class="slider-portion">
              </div>
              <div class="slider-output">
                <span><strong><span class="portion-output">100</span>%</strong></span>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Protein</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="20" step="2"
                  value="0" class="slider-protein">
              </div>
              <div class="slider-output">
                +<strong><span class="protein-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Carbs</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="35" step="5"
                  value="0" class="slider-carbs">
              </div>
              <div class="slider-output">
                +<strong><span class="carbs-output">0</span> g</strong>
              </div>
            </div>

            <div class="slider-row">
              <div class="slider-label">
                <span class="top">Fats</span>
                <span class="bottom">Extra grams to add</span>
              </div>
              <div class="slider-track-wrap">
                <input type="range" min="0" max="15" step="1"
                  value="0" class="slider-fat">
              </div>
              <div class="slider-output">
                +<strong><span class="fat-output">0</span> g</strong>
              </div>
            </div>
          </div>
        </article>

      </div>
    </section>
  </div>

  <p class="fine-print">
    <strong>Important:</strong> sliders do not change what is written on the plate — only how much protein, carbs and fats you are getting from each meal.
    Your coach in X45 reads these final numbers when giving daily instructions.
  </p>
</div>

<script>
(function(){
  const KCAL_P = 4;
  const KCAL_C = 4;
  const KCAL_F = 9;

  function formatNumber(num){
    return Math.round(num);
  }

  function updateAll(){
    const mealCards = document.querySelectorAll('.meal-card');
    let totalP = 0, totalC = 0, totalF = 0, totalKcal = 0;

    mealCards.forEach(card => {
      const baseP = parseFloat(card.dataset.baseProtein) || 0;
      const baseC = parseFloat(card.dataset.baseCarbs) || 0;
      const baseF = parseFloat(card.dataset.baseFat) || 0;

      const portionSlider = card.querySelector('.slider-portion');
      const portionFactor = portionSlider ? (parseFloat(portionSlider.value) || 100) / 100 : 1;

      const pExtraSlider = card.querySelector('.slider-protein');
      const cExtraSlider = card.querySelector('.slider-carbs');
      const fExtraSlider = card.querySelector('.slider-fat');

      const pExtra = pExtraSlider ? parseFloat(pExtraSlider.value) || 0 : 0;
      const cExtra = cExtraSlider ? parseFloat(cExtraSlider.value) || 0 : 0;
      const fExtra = fExtraSlider ? parseFloat(fExtraSlider.value) || 0 : 0;

      const mealP = (baseP + pExtra) * portionFactor;
      const mealC = (baseC + cExtra) * portionFactor;
      const mealF = (baseF + fExtra) * portionFactor;
      const mealKcal = mealP * KCAL_P + mealC * KCAL_C + mealF * KCAL_F;

      totalP += mealP;
      totalC += mealC;
      totalF += mealF;
      totalKcal += mealKcal;

      const kcalEl = card.querySelector('.meal-kcal');
      const pEl = card.querySelector('.meal-protein');
      const cEl = card.querySelector('.meal-carbs');
      const fEl = card.querySelector('.meal-fat');

      if(kcalEl) kcalEl.textContent = formatNumber(mealKcal);
      if(pEl) pEl.textContent = formatNumber(mealP);
      if(cEl) cEl.textContent = formatNumber(mealC);
      if(fEl) fEl.textContent = formatNumber(mealF);

      const portionOut = card.querySelector('.portion-output');
      if(portionOut) portionOut.textContent = formatNumber(portionFactor*100);

      const pExtraOut = card.querySelector('.protein-output');
      const cExtraOut = card.querySelector('.carbs-output');
      const fExtraOut = card.querySelector('.fat-output');
      if(pExtraOut) pExtraOut.textContent = formatNumber(pExtra);
      if(cExtraOut) cExtraOut.textContent = formatNumber(cExtra);
      if(fExtraOut) fExtraOut.textContent = formatNumber(fExtra);
    });

    // Update totals
    const totalProteinEl = document.getElementById('total-protein');
    const totalCarbsEl = document.getElementById('total-carbs');
    const totalFatEl = document.getElementById('total-fat');
    const totalCaloriesTextEl = document.getElementById('total-calories-text');
    const donutKcalEl = document.getElementById('donut-kcal');
    const summaryCaloriesEl = document.getElementById('summary-calories');
    const summaryProteinEl = document.getElementById('summary-protein');
    const summaryCarbsEl = document.getElementById('summary-carbs');
    const summaryFatEl = document.getElementById('summary-fat');

    if(totalProteinEl) totalProteinEl.textContent = formatNumber(totalP) + ' g';
    if(totalCarbsEl) totalCarbsEl.textContent = formatNumber(totalC) + ' g';
    if(totalFatEl) totalFatEl.textContent = formatNumber(totalF) + ' g';
    if(totalCaloriesTextEl) totalCaloriesTextEl.textContent = formatNumber(totalKcal);
    if(donutKcalEl) donutKcalEl.textContent = formatNumber(totalKcal);

    if(summaryCaloriesEl) summaryCaloriesEl.textContent = formatNumber(totalKcal);
    if(summaryProteinEl) summaryProteinEl.textContent = formatNumber(totalP) + ' g';
    if(summaryCarbsEl) summaryCarbsEl.textContent = formatNumber(totalC) + ' g';
    if(summaryFatEl) summaryFatEl.textContent = formatNumber(totalF) + ' g';

    const macrosTotal = totalP + totalC + totalF;
    let pPerc = 0, cPerc = 0, fPerc = 0;
    if(macrosTotal > 0){
      pPerc = (totalP / macrosTotal) * 100;
      cPerc = (totalC / macrosTotal) * 100;
      fPerc = 100 - pPerc - cPerc;
    }

    const splitP = document.getElementById('split-protein');
    const splitC = document.getElementById('split-carbs');
    const splitF = document.getElementById('split-fat');
    if(splitP) splitP.textContent = formatNumber(pPerc) + '%';
    if(splitC) splitC.textContent = formatNumber(cPerc) + '%';
    if(splitF) splitF.textContent = formatNumber(fPerc) + '%';

    const donut = document.getElementById('macro-donut');
    if(donut){
      donut.style.setProperty('--p', pPerc || 0);
      donut.style.setProperty('--c', cPerc || 0);
      donut.style.setProperty('--f', fPerc || 0);
    }
  }

  function attachListeners(){
    const container = document.getElementById('meals-list');
    if(!container) return;
    container.addEventListener('input', function(e){
      const target = e.target;
      if(target.matches('.slider-portion') ||
         target.matches('.slider-protein') ||
         target.matches('.slider-carbs') ||
         target.matches('.slider-fat')){
        updateAll();
      }
    });
  }

  document.addEventListener('DOMContentLoaded', function(){
    attachListeners();
    updateAll();
  });
})();
</script>
</body>
</html>
